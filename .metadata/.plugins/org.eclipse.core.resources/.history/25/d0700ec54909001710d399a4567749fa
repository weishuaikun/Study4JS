<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>单例模式</title>
		<meta name="description" content="" />
		<meta name="author" content="Administrator" />

		<meta name="viewport" content="width=device-width; initial-scale=1.0" />

		<!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
	</head>

	<body>
		<script>
			var createLoginLayer = function(){
				var div = document.createElement('div');
				div.innerHTML = "我是登录悬浮窗";
				div.style.display = 'none';
				document.body.appendChild(div);
				return div;
			};
			
			var getSingle = function(fn){
				//result 变量因为身在闭包中，它永远不会被销毁。
				//在将来的请求中，如果 result 已经被赋值，那么它将返回这个值
				var result;
				return function(){
					//在这里是使用了逻辑或||的短路特性来判断result是否为空，
					//如果不为空则直接返回result的值，
					//如果为空则调用fn为其赋值然后返回result的值。
					return result || (result = fn.apply(this,arguments))
				};
			};
		</script>
	</body>
</html>
