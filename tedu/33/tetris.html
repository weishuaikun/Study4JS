<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8"/>
		<title>俄罗斯方块</title>
		<link rel="stylesheet" href="css/tetris.css"/>
		<script src="js/shapes.js"></script>
		<script>
			window.$ = function(selector) {
				return document.querySelectorAll(selector);
			}
			//使用对象直接量创建tetris对象
			var tetris = {
				RN : 20,
				CN : 10,
				CELL_SIZE : 26,
				IMGS : {
					O : 'img/O.png',
					I : 'img/I.png',
					T : 'img/T.png'
				},
				OFFSET_X : 15,
				OFFSET_Y : 15,
				shape : null,
				pg : null,
				//添加游戏开始的方法
				start : function() {
					this.pg = $('.playground')[0];
					this.shape = new T();
					this.paintShape();
				},
				//创建绘制O型图像的方法
				paintShape : function() {
					//创建文档碎片
					var frag = document.createDocumentFragment();
					for (var i = 0; i < 4; i++) {
						var c = this.shape.cells[i];
						var x = c.col * this.CELL_SIZE + this.OFFSET_X;
						var y = c.row * this.CELL_SIZE + this.OFFSET_Y;
						var img = new Image();
						img.src = c.img;
						img.style.left = x + 'px';
						img.style.top = y + 'px';
						//将生成的方块添加到文档碎片中
						frag.appendChild(img);
					}
					//将文档碎片添加到场景中
					this.pg.appendChild(frag);
				}
			}
			
			//调用开始方法
			window.onload = function() {
				tetris.start();
			}

		</script>
	</head>
	<body>
		<!--加载游戏的背景-->
		<div class="playground">
			<!--为游戏增加分数、行数、等级-->
			<p>
				SCORE:<span>120</span>
			</p>
			<p>
				LINES:<span>10</span>
			</p>
			<p>
				LEVEL:<span>1</span>
			</p>
		</div>
	</body>
</html>